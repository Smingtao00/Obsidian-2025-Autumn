#二元关系

$<a,b> = \{\{a\},\{a,b\}\}$

$a = \cap<a,b>$

$b = \cup<a,b> - \cap<a,b>$

### 笛卡尔积（卡氏积）

**定义：**$A \times B = \{<x,y> | {x \in A} \land {y \in B}\}$

**性质：非交换，非结合，有分配率**

$A \times (B \cup C) = (A \times B) \cup (A \times C)$ 

$A \times (B \cap C) = (A \times B) \cap (A \times C)$

$(A - B) \times (C - D) \subseteq (A \times C) - (B \times D)$

> [!tip]- 证明
>[[第 2 章  二元关系.pdf#page=12&selection=0,1,0,5|第 2 章  二元关系, 页面 12]]

$(A \times C) \cup (B \times D) \subseteq (A \cup B) \times (C \cup D)$

---

## A上的二元关系

**A** 上的二元关系是 $A \times A$ 的任意子集

$R$ 是 $A$ 上的二元关系 $\Leftrightarrow R \subseteq A \times A \Leftrightarrow R \in P(A \times A)$

- 定义域 $domR = \{x | \exists y(xRy)\}$
-  值域 $ranR = {y|\exists x(xRy) }$
- 域 $fldR = domR \cup ranR$
- 单根 $\forall y(y \in ranF \rightarrow \exists!x(x\in domF \land xFy))$
- 单值 $\forall x(x \in domF \rightarrow \exists!y(y \in ranF \land xFy))$

### 关于域的定理

***注意交集和差的特殊性***

1. $dom(F \cup G) = domF \cup dom G$
2. $ran(F \cup G) = ranF \cup ranG$
3. $dom(F \cap G) \subseteq domF \cap domG$
4. $ran(F \cap G) \subseteq ranF \cap ranG$
5. $domF - domG \subseteq dom(F - G)$
6. $ranF - ranG \subseteq ran(F- G)$

> [!tips]- 5的证明：
> $$
> \begin{aligned}
> x \in (domF -dom G)
> \\ \Leftrightarrow x \in domF \and x \notin domG
> \\ \Leftrightarrow \exist y(<x,y> \in F)\and\forall y(<x,y>\notin G)
> \\ \Rightarrow \exist y(<x,y> \in F \and <x,y> \notin G)
> \\ \Leftrightarrow \exist y(<x,y> \in (F -G))
> \\ \Leftrightarrow x \in dom(F - G)
> \end{aligned}
> $$

象，逆，合成与限制：[[第 2 章  二元关系.pdf#page=37&selection=43,2,51,2|第 2 章  二元关系, 页面 37]]

- $dom F^{-1} = ran F$
- $ran F^{-1} = dom F$
- $(F^{-1})^{-1} \subseteq F$

***注意最后一个！***

- $R_1 \circ (R_2 \cap R_3) \subseteq R_1 \circ R_2 \cap R_1 \circ R_3$
- $(R_1 \cap R_2) \circ R_3 \subseteq R_1 \circ R_3 \cap R_2 \circ R_3$
- $(F \circ G)^{-1} = G^{-1} \circ F^{-1}$
- 合成、限制以及象之间的关系：[[第 2 章  二元关系.pdf#page=55&selection=0,1,0,7|第 2 章  二元关系, 页面 55]]

###  关系矩阵的性质

$M(R^{-1}) = (M(R))^{T}$

$M(R_1 \circ R_2) = M(R_2) \cdot M(R_1)$ 右复合

### 自反性，反自反性，对称性，反对称性，传递性

**概念：**

[[第 2 章  二元关系.pdf#page=70&selection=4,0,6,12|第 2 章  二元关系, 页面 70]]

**满足不同性质的关系的计数：**

[[第 2 章  二元关系.pdf#page=98&selection=0,7,0,10|第 2 章  二元关系, 页面 98]]

---

## 关系的闭包

- 自反闭包 $r(R) = R^{0} \cup R$
- 对称闭包 $s(R) = R^{-1} \cup R$
- 传递闭包 $t(R) = \sum_{i = 1}^{\infty} R^{i}$
- $r(R_1 \cup R_2) = r(R_1) \cup r(R_2)$
- $s(R_1 \cup R_2) = s(R_1) \cup s(R_2)$
- $t(R_1) \cup t(R_2) \subseteq t(R_1 \cup R_2)$

***注意最后一个，传递闭包的并集不一定有传递性！***

求传递闭包的 Warshall算法: [[第 2 章  二元关系.pdf#page=145&selection=0,0,2,2|第 2 章  二元关系, 页面 145]]

- $R$ 自反 $\Rightarrow$ $s(R),t(R)$ 自反
- $R$ 对称 $\Rightarrow$ $r(R),t(R)$ 对称
- $R$ 传递 $\Rightarrow$ $r(R)$传递（==$s(R)$== 不一定传递！）

- $rs(R) = sr(R)$
- $rt(R) = tr(R)$
- $st(R) \subseteq ts(R)$ ==!!!注意!!!==（考虑 $R = \{<a,b>\}, st(R) = \{<a,b>,<b,a>\}, ts(R) = \{<a, b>, <b, a>, <a,a>, <b, b>\}$）

说明：$rs(R) = r(s(R))$

###  等价关系

自反性 + 对称性 + 传递性 = 等价关系

### 等价类

$[x]_R = \{y | y \in A \land xRy\}$ 为 ==x关于R的等价类==，简称为x的等价类

设  $R$ 为  $A \neq \emptyset$ 上的等价关系，则对 $\forall x, y \in A$

1. $[x]_R \neq \emptyset$
2. $xRy \Rightarrow [x]_R = [y]_R$
3. $\neg xRy \Rightarrow [x]_R \cap [y]_R = \emptyset$
4. $\cup\{[x]_R|x \in A\} = A$

### 商集

$A/B = \{[x]_R | x \in A\}$ 为A关于R的商集

### 划分

[[第 2 章  二元关系.pdf#page=184&selection=10,2,12,1|第 2 章  二元关系, 页面 184]]

### Stirling数
#striling数

[[第 2 章  二元关系.pdf#page=195&selection=8,2,13,1|第 2 章  二元关系, 页面 195]]

### 偏序关系

自反 + 反对称 + 传递 = 偏序关系

#### 偏序集

[[第 2 章  二元关系.pdf#page=204&selection=5,0,13,3|第 2 章  二元关系, 页面 204]]

可比，严格小于，覆盖，哈斯图：[[第 2 章  二元关系.pdf#page=211&selection=4,0,19,1|第 2 章  二元关系, 页面 211]]

### 链和反链

[[第 2 章  二元关系.pdf#page=235&selection=4,1,13,1|第 2 章  二元关系, 页面 235]]

#### 定理

设 $<A, \preccurlyeq>$ 为偏序集，$A$ 中最长链长度为 $n$ ，则

1.  $A$ 中存在极大元
2.  $A$ 中存在 $n$ 个划分块的划分，使得每个划分块都是==反链==

#### 推论

设 $<A, \preccurlyeq>$ 为偏序集，若 $|A| = mn + 1$，则
$A$ 中要么存在长度为 $m+1$ 的反链，要么存在长度为 $n+1$ 的链

#### Dilworth定理

偏序集中最小的反链划分数等于最长链的长度（反证法 + 鸽巢原理）

### 全序关系（线序关系）

[[第 2 章  二元关系.pdf#page=246&selection=0,1,2,2|第 2 章  二元关系, 页面 246]]

偏序关系+任意元素 $x,y$ 可比

充要条件：哈斯图是一条“直线”

### 拟序关系

[[第 2 章  二元关系.pdf#page=248&selection=0,0,0,4|第 2 章  二元关系, 页面 248]]

反自反+传递

反自反 $\land$ 传递 $\Rightarrow$ 反对称

1. $\prec$ 是反对称的
2. $\preccurlyeq - I_A$ 是 $A$ 上拟序关系
3. $\prec \cup I_A$ 是 $A$ 上偏序关系 

### 后面不想打了

[[第 2 章  二元关系.pdf#page=251&selection=7,2,11,2|第 2 章  二元关系, 页面 251]]

### 表决系统，少数服从多数原则，孔多塞悖论，阿罗不可能定理

[[第 2 章  二元关系.pdf#page=256&selection=9,1,24,2|第 2 章  二元关系, 页面 256]]
